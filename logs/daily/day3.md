# 开发日志 - 第3天

## 日期
2026-02-08

今天主要做前端开发和前后端联调。

先做了登录注册页面。登录页面有用户名和密码输入框，点击登录按钮调用后端登录接口，成功后把token存到localStorage，然后跳转到首页。注册页面有用户名、手机号、邮箱、密码、确认密码这些输入框，密码要输入两次确认一致，点击注册按钮调用后端注册接口，成功后跳转到登录页面。

然后做了首页。首页有轮播图展示热门书籍，有分类列表展示所有书籍分类，有书籍列表展示最新上架的书籍。这些数据都从后端API获取，用axios发送请求，响应数据用ref和reactive管理，页面用v-for渲染。

书籍列表页支持搜索、筛选、排序功能。搜索框输入关键词后调用后端搜索接口，分类下拉框选择分类后调用后端筛选接口，价格范围输入框输入价格后调用后端价格筛选接口，排序下拉框选择排序方式后调用后端排序接口。这些功能都用watch监听参数变化，自动触发请求。

书籍详情页展示书籍的详细信息，包括封面、书名、作者、出版社、出版日期、页数、分类、成色、价格、原价、库存、描述这些。还有卖家信息展示，包括卖家名称、等级、评分、是否认证这些。还有评价列表展示，包括评价内容、评分、评价时间这些。还有相似书籍推荐，推荐同分类的其他书籍。

个人中心页面展示用户信息，包括头像、用户名、手机号、邮箱、等级、积分这些。还有我的书籍列表，展示用户发布的书籍，可以查看、编辑、下架。还有我的订单列表，展示用户的订单，可以查看详情、确认收货、取消订单。还有我的收藏列表，展示用户收藏的书籍，可以查看详情、取消收藏。

前后端联调的时候遇到了几个问题。第一个问题是跨域，前端访问后端API报跨域错误。解决方法是在后端配置CORS，允许前端域名访问。

第二个问题是JWT token没有正确发送到后端。解决方法是在axios请求拦截器里自动添加Authorization头，把token从localStorage取出来放进去。

第三个问题是日期格式显示不对，后端返回的是ISO 8601格式，前端显示的是一串时间戳。解决方法是写了一个formatRelativeTime函数，把ISO 8601格式转换成相对时间，比如"2小时前"、"3天前"这种。

第四个问题是分类ID和分类名称映射不对，前端显示的是分类ID而不是分类名称。解决方法是在后端返回分类ID的同时也返回分类名称，前端直接显示分类名称。

第五个问题是发布时间显示为null，后端返回的createdAt字段前端没有正确解析。解决方法是检查后端返回的数据格式，确保字段名和前端期望的一致。

今天测试了所有接口，分类接口、热门书籍接口、书籍列表接口、书籍详情接口、评价列表接口、评价统计接口、相似推荐接口都测试通过了。登录注册接口也测试通过了，用户可以正常注册和登录。用户信息接口、我的书籍接口、我的订单接口、我的收藏接口也测试通过了。

明天打算做性能优化和部署配置，包括数据库索引优化、缓存配置、Docker部署这些。
