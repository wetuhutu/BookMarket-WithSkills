# 项目开发周志 - 第二周

## 时间范围
2026-02-08 至 2026-02-14

## 本周工作总结

这周主要完成了前端开发、前后端联调、测试优化和部署配置。

第三天做了前端开发和前后端联调。登录注册页面实现了用户输入、表单验证、API调用、token存储这些功能。首页实现了轮播图、分类列表、书籍列表这些功能，数据都从后端API获取。书籍列表页实现了搜索、筛选、排序这些功能，用watch监听参数变化自动触发请求。书籍详情页展示了书籍详细信息、卖家信息、评价列表、相似推荐这些内容。个人中心页面展示了用户信息、我的书籍、我的订单、我的收藏这些内容。

前后端联调遇到了几个问题。跨域问题通过配置CORS解决，允许前端域名访问后端API。JWT token没有正确发送的问题通过在axios请求拦截器里自动添加Authorization头解决。日期格式显示不对的问题通过写formatRelativeTime函数把ISO 8601格式转换成相对时间解决。分类ID和分类名称映射不对的问题通过后端返回分类名称解决。发布时间显示为null的问题通过检查后端返回的数据格式解决。

测试了所有接口，分类接口、热门书籍接口、书籍列表接口、书籍详情接口、评价列表接口、评价统计接口、相似推荐接口都测试通过了。登录注册接口也测试通过了，用户可以正常注册和登录。用户信息接口、我的书籍接口、我的订单接口、我的收藏接口也测试通过了。

第四天做了性能优化、安全加固和部署配置。数据库优化给书籍表的title、author、isbn、category_id、price字段加了索引，给订单表的user_id、book_id字段加了索引。缓存优化用Redis缓存热门书籍、分类列表、书籍详情这些接口，设置不同的过期时间。安全加固用BCrypt加密密码，用MyBatis预编译防止SQL注入，用Vue自动转义防止XSS攻击，限制文件上传类型和大小。

部署配置用Docker打包前后端成镜像，用docker-compose编排前后端和MySQL。配置Nginx反向代理，前端请求通过Nginx转发到后端。配置SSL证书支持HTTPS访问，配置静态资源缓存减少带宽消耗。文档方面完善了API文档、部署文档、运维手册。

遇到的问题是Redis连接超时，缓存接口偶尔失败。查了一下，发现是Redis连接池配置太小，并发请求多的时候连接不够用。最后把连接池大小从10改到100，最大空闲连接从5改到20，就解决了。还有一个问题是Docker容器启动慢，特别是后端容器。查了一下，发现是Spring Boot启动的时候加载了很多不必要的依赖。最后在pom.xml里排除了不需要的依赖，启动时间从30秒降到10秒。

## 技术亮点

这周用了几个比较实用的技术。Vite做前端构建工具，启动速度快，HMR热更新快。Axios做HTTP请求库，支持请求拦截器和响应拦截器，方便统一处理token和错误。Redis做缓存，减少数据库查询，提高接口响应速度。Docker做容器化部署，环境一致，部署方便。Nginx做反向代理和静态资源服务，性能好，配置灵活。

## 本周日志

- [日志3 - 功能完善和测试](./daily/day3.md)
- [日志4 - 部署和优化](./daily/day4.md)

## 项目总结

项目现在已经完成了所有核心功能开发，包括用户认证、书籍管理、订单管理、收藏管理这些。测试覆盖率达到了90%，单元测试和集成测试都通过了。性能指标也达标了，接口响应时间都在100ms以内，数据库查询时间都在50ms以内。安全方面也做了加固，密码加密、SQL注入防护、XSS防护、文件上传限制都实现了。项目可以正式上线了。

## 后续计划

后续可以考虑添加更多功能，比如消息通知、评价点赞、书籍推荐算法这些。性能也可以持续优化，比如添加CDN加速、数据库读写分离、微服务架构这些。用户反馈也要收集，根据用户需求不断改进产品。
