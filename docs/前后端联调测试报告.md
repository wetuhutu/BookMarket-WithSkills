# å‰åç«¯è”è°ƒæµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•ç¯å¢ƒ

- **åç«¯åœ°å€**: http://localhost:8080/api
- **å‰ç«¯åœ°å€**: http://localhost:5173
- **æµ‹è¯•æ—¥æœŸ**: 2026-02-03
- **æµ‹è¯•äººå‘˜**: AI Assistant

---

## ä¸€ã€APIæ¥å£æµ‹è¯•

### 1.1 åˆ†ç±»æ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/books/categories` | GET | âœ… PASS | <100ms | æˆåŠŸè¿”å›6ä¸ªåˆ†ç±» |

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {"name": "æ•™è‚²", "id": "education", "icon": "ğŸ“š", "count": 2},
    {"name": "è‰ºæœ¯", "id": "art", "icon": "ğŸ¨", "count": 1},
    {"name": "å†å²", "id": "history", "icon": "ğŸ“œ", "count": 1},
    {"name": "å°è¯´", "id": "novel", "icon": "ğŸ“–", "count": 1},
    {"name": "å“²å­¦", "id": "philosophy", "icon": "ğŸ§ ", "count": 1},
    {"name": "ç§‘å­¦", "id": "science", "icon": "ğŸ”¬", "count": 1}
  ]
}
```

**å‰ç«¯é€‚é…**: âœ… æ­£å¸¸
- å‰ç«¯Home.vueéœ€è¦categoriesæ•°æ®
- æ•°æ®ç»“æ„å®Œå…¨åŒ¹é…

---

### 1.2 çƒ­é—¨ä¹¦ç±æ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/books/hot?limit=4` | GET | âœ… PASS | <100ms | æˆåŠŸè¿”å›4æœ¬çƒ­é—¨ä¹¦ç± |

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 8,
      "title": "ç»™æ•™å¸ˆçš„å»ºè®®",
      "author": "è‹éœå§†æ—æ–¯åŸº",
      "condition": "ä¸ƒæˆæ–°",
      "price": 29.8,
      "originalPrice": 39.8,
      "cover": "https://picsum.photos/400/600?random=6",
      "sellerName": null,
      "sellerLevel": null,
      "sellerRating": 0.0,
      "isVerified": 0
    }
  ]
}
```

**å‰ç«¯é€‚é…**: âœ… æ­£å¸¸
- å‰ç«¯Home.vueéœ€è¦hotBooksæ•°æ®
- æ•°æ®ç»“æ„å®Œå…¨åŒ¹é…

**æ³¨æ„**: âš ï¸ sellerNameã€sellerLevelç­‰å­—æ®µä¸ºnullï¼Œéœ€è¦æ£€æŸ¥æ•°æ®

---

### 1.3 ä¹¦ç±åˆ—è¡¨æ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/books?page=1&pageSize=12` | GET | âœ… PASS | <100ms | æˆåŠŸè¿”å›7æœ¬ä¹¦ç± |

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "title": "ç™¾å¹´å­¤ç‹¬",
        "author": "åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯",
        "categoryId": "novel",
        "condition": "ä¹æˆæ–°",
        "price": 45.00,
        "originalPrice": 59.50,
        "cover": "https://picsum.photos/400/600?random=1"
      }
    ],
    "total": 7,
    "page": 1,
    "pageSize": 12
  }
}
```

**å‰ç«¯é€‚é…**: âœ… æ­£å¸¸
- å‰ç«¯Books.vueéœ€è¦åˆ†é¡µä¹¦ç±åˆ—è¡¨
- æ•°æ®ç»“æ„å®Œå…¨åŒ¹é…
- æ”¯æŒåˆ†é¡µå‚æ•°

---

### 1.4 ä¹¦ç±è¯¦æƒ…æ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/books/1` | GET | âœ… PASS | <100ms | æˆåŠŸè¿”å›ä¹¦ç±è¯¦æƒ… |

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "title": "ç™¾å¹´å­¤ç‹¬",
    "author": "åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯",
    "isbn": "9787544274242",
    "publisher": "å—æµ·å‡ºç‰ˆå…¬å¸",
    "publishDate": "2015-06",
    "pages": 360,
    "categoryId": "novel",
    "condition": "ä¹æˆæ–°",
    "price": 45.0,
    "originalPrice": 59.5,
    "cover": "https://picsum.photos/400/600?random=1",
    "description": "ã€Šç™¾å¹´å­¤ç‹¬ã€‹æ˜¯å“¥ä¼¦æ¯”äºšä½œå®¶åŠ è¥¿äºšÂ·é©¬å°”å…‹æ–¯çš„ä»£è¡¨ä½œ...",
    "sellerId": 2,
    "sellerName": "seller_001",
    "sellerLevel": "é‡‘ç‰Œå–å®¶",
    "sellerRating": 0.0,
    "verified": true
  }
}
```

**å‰ç«¯é€‚é…**: âœ… æ­£å¸¸
- å‰ç«¯BookDetail.vueéœ€è¦ä¹¦ç±è¯¦æƒ…
- æ•°æ®ç»“æ„å®Œå…¨åŒ¹é…
- åŒ…å«å–å®¶ä¿¡æ¯

**æ³¨æ„**: âš ï¸ sellerRatingä¸º0.0ï¼Œå¯èƒ½æ˜¯æ•°æ®é—®é¢˜

---

### 1.5 ä¹¦ç±è¯„ä»·æ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/books/1/reviews` | GET | âœ… PASS | <100ms | æˆåŠŸè¿”å›è¯„ä»·åˆ—è¡¨ |

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 11,
        "bookId": 1,
        "userId": 1,
        "userName": "å¼ ä¸‰",
        "userAvatar": "https://avatar.com/zhangsan.jpg",
        "rating": 5,
        "content": "è¿™æœ¬ä¹¦å†…å®¹è¶…èµï¼Œä½œè€…çš„æ–‡ç¬”å¾ˆç»†è…»...",
        "createdAt": "2026-01-01T02:30:00.000+00:00"
      }
    ],
    "total": 1,
    "page": 1,
    "pageSize": 10
  }
}
```

**å‰ç«¯é€‚é…**: âœ… æ­£å¸¸
- å‰ç«¯BookDetail.vueéœ€è¦è¯„ä»·åˆ—è¡¨
- æ•°æ®ç»“æ„å®Œå…¨åŒ¹é…
- æ”¯æŒåˆ†é¡µ

**æ³¨æ„**: âš ï¸ createdAtæ ¼å¼ä¸ºISO 8601ï¼Œå‰ç«¯éœ€è¦æ ¼å¼åŒ–

---

### 1.6 è¯„ä»·ç»Ÿè®¡æ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/books/1/reviews/statistics` | GET | âœ… PASS | <100ms | æˆåŠŸè¿”å›è¯„ä»·ç»Ÿè®¡ |

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "rating": 5.0,
    "totalCount": 1,
    "distribution": {"1": 0, "2": 0, "3": 0, "4": 0, "5": 1}
  }
}
```

**å‰ç«¯é€‚é…**: âœ… æ­£å¸¸
- å‰ç«¯BookDetail.vueéœ€è¦è¯„ä»·ç»Ÿè®¡
- æ•°æ®ç»“æ„å®Œå…¨åŒ¹é…

---

### 1.7 ç›¸ä¼¼æ¨èæ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/books/1/related?limit=4` | GET | âœ… PASS | <100ms | æˆåŠŸè¿”å›ç©ºæ•°ç»„ |

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```

**å‰ç«¯é€‚é…**: âœ… æ­£å¸¸
- å‰ç«¯BookDetail.vueéœ€è¦ç›¸ä¼¼æ¨è
- æ•°æ®ç»“æ„åŒ¹é…
- è¿”å›ç©ºæ•°ç»„æ˜¯æ­£å¸¸çš„ï¼ˆåŒåˆ†ç±»ä¹¦ç±ä¸è¶³ï¼‰

---

### 1.8 ç™»å½•æ¥å£

| æ¥å£ | æ–¹æ³• | çŠ¶æ€ | å“åº”æ—¶é—´ | è¯´æ˜ |
|------|------|------|----------|------|
| `/auth/login` | POST | âœ… PASS | <100ms | æˆåŠŸè¿”å›token |

**è¯·æ±‚æ•°æ®**:
```json
{
  "username": "test",
  "password": "123456"
}
```

**å“åº”æ•°æ®**:
```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

**å‰ç«¯é€‚é…**: âš ï¸ éƒ¨åˆ†é—®é¢˜
- æ¥å£è°ƒç”¨æˆåŠŸ
- ä½†è¿”å›çš„dataä¸ºnullï¼Œæ²¡æœ‰è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯
- å‰ç«¯éœ€è¦tokenè¿›è¡Œåç»­è¯·æ±‚

**é—®é¢˜**: ğŸ”´ ä¸¥é‡
- ç™»å½•æ¥å£åº”è¯¥è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯
- å½“å‰è¿”å›dataä¸ºnullï¼Œå‰ç«¯æ— æ³•è·å–è®¤è¯ä¿¡æ¯

---

## äºŒã€æ•°æ®æ ¼å¼éªŒè¯

### 2.1 æ—¥æœŸæ ¼å¼

| å­—æ®µ | åç«¯æ ¼å¼ | å‰ç«¯æœŸæœ› | çŠ¶æ€ | è¯´æ˜ |
|------|----------|-----------|------|------|
| createdAt | ISO 8601 | ç›¸å¯¹æ—¶é—´ï¼ˆå¦‚"2å°æ—¶å‰"ï¼‰ | âš ï¸ éœ€è½¬æ¢ | å‰ç«¯éœ€è¦æ ¼å¼åŒ–å‡½æ•° |
| publishDate | YYYY-MM | YYYY-MM | âœ… åŒ¹é… | ç›´æ¥å¯ç”¨ |

**å»ºè®®**: åœ¨å‰ç«¯åˆ›å»º `formatRelativeTime()` å‡½æ•°

### 2.2 ä»·æ ¼æ ¼å¼

| å­—æ®µ | åç«¯æ ¼å¼ | å‰ç«¯æœŸæœ› | çŠ¶æ€ | è¯´æ˜ |
|------|----------|-----------|------|------|
| price | decimal(10,2) | Â¥XX.XX | âœ… åŒ¹é… | å‰ç«¯æ·»åŠ Â¥ç¬¦å· |
| originalPrice | decimal(10,2) | Â¥XX.XX | âœ… åŒ¹é… | å‰ç«¯æ·»åŠ Â¥ç¬¦å· |

**å»ºè®®**: åœ¨å‰ç«¯åˆ›å»º `formatPrice()` å‡½æ•°

### 2.3 æˆè‰²æšä¸¾

| åç«¯å€¼ | å‰ç«¯æ˜¾ç¤º | çŠ¶æ€ | è¯´æ˜ |
|--------|----------|------|------|
| å…¨æ–° | å…¨æ–° | âœ… åŒ¹é… | - |
| ä¹æˆæ–° | ä¹æˆæ–° | âœ… åŒ¹é… | - |
| å…«æˆæ–° | å…«æˆæ–° | âœ… åŒ¹é… | - |
| ä¸ƒæˆæ–° | ä¸ƒæˆæ–° | âœ… åŒ¹é… | - |

**çŠ¶æ€**: âœ… å®Œå…¨åŒ¹é…

---

## ä¸‰ã€å‰ç«¯é¡µé¢æµ‹è¯•

### 3.1 é¦–é¡µ (Home.vue)

| åŠŸèƒ½ | APIè°ƒç”¨ | æ•°æ®æ˜¾ç¤º | çŠ¶æ€ | è¯´æ˜ |
|------|----------|----------|------|------|
| åˆ†ç±»å±•ç¤º | `/books/categories` | âœ… æ­£å¸¸ | âœ… PASS | 6ä¸ªåˆ†ç±»æ­£å¸¸æ˜¾ç¤º |
| çƒ­é—¨ä¹¦ç± | `/books/hot?limit=4` | âœ… æ­£å¸¸ | âœ… PASS | 4æœ¬ä¹¦ç±æ­£å¸¸æ˜¾ç¤º |
| ç»Ÿè®¡æ•°æ® | æ— æ¥å£ | âš ï¸ é™æ€æ•°æ® | âš ï¸ INFO | ä½¿ç”¨ç¡¬ç¼–ç æ•°æ® |

**çŠ¶æ€**: âœ… åŸºæœ¬æ­£å¸¸

### 3.2 ä¹¦ç±åˆ—è¡¨é¡µ (Books.vue)

| åŠŸèƒ½ | APIè°ƒç”¨ | æ•°æ®æ˜¾ç¤º | çŠ¶æ€ | è¯´æ˜ |
|------|----------|----------|------|------|
| ä¹¦ç±åˆ—è¡¨ | `/books` | âœ… æ­£å¸¸ | âœ… PASS | 7æœ¬ä¹¦ç±æ­£å¸¸æ˜¾ç¤º |
| æœç´¢åŠŸèƒ½ | `/books?keyword=` | âš ï¸ æœªæµ‹è¯• | âš ï¸ TODO | éœ€è¦æµ‹è¯•æœç´¢ |
| åˆ†ç±»ç­›é€‰ | `/books?category=` | âš ï¸ æœªæµ‹è¯• | âš ï¸ TODO | éœ€è¦æµ‹è¯•ç­›é€‰ |
| ä»·æ ¼æ’åº | `/books?sortBy=` | âš ï¸ æœªæµ‹è¯• | âš ï¸ TODO | éœ€è¦æµ‹è¯•æ’åº |

**çŠ¶æ€**: âš ï¸ éœ€è¦è¿›ä¸€æ­¥æµ‹è¯•

### 3.3 ä¹¦ç±è¯¦æƒ…é¡µ (BookDetail.vue)

| åŠŸèƒ½ | APIè°ƒç”¨ | æ•°æ®æ˜¾ç¤º | çŠ¶æ€ | è¯´æ˜ |
|------|----------|----------|------|------|
| ä¹¦ç±è¯¦æƒ… | `/books/{id}` | âœ… æ­£å¸¸ | âœ… PASS | è¯¦æƒ…æ­£å¸¸æ˜¾ç¤º |
| å–å®¶ä¿¡æ¯ | `/books/{id}` | âœ… æ­£å¸¸ | âœ… PASS | å–å®¶ä¿¡æ¯æ­£å¸¸æ˜¾ç¤º |
| è¯„ä»·åˆ—è¡¨ | `/books/{id}/reviews` | âœ… æ­£å¸¸ | âœ… PASS | è¯„ä»·æ­£å¸¸æ˜¾ç¤º |
| è¯„ä»·ç»Ÿè®¡ | `/books/{id}/reviews/statistics` | âœ… æ­£å¸¸ | âœ… PASS | ç»Ÿè®¡æ­£å¸¸æ˜¾ç¤º |
| ç›¸ä¼¼æ¨è | `/books/{id}/related` | âœ… æ­£å¸¸ | âœ… PASS | è¿”å›ç©ºæ•°ç»„ |

**çŠ¶æ€**: âœ… æ­£å¸¸

### 3.4 å‘å¸ƒä¹¦ç±é¡µ (Publish.vue)

| åŠŸèƒ½ | APIè°ƒç”¨ | æ•°æ®æ˜¾ç¤º | çŠ¶æ€ | è¯´æ˜ |
|------|----------|----------|------|------|
| å‘å¸ƒä¹¦ç± | âŒ æ— æ¥å£ | âŒ æ— æ³•æµ‹è¯• | ğŸ”´ FAIL | éœ€è¦æ–°å¢POSTæ¥å£ |

**çŠ¶æ€**: ğŸ”´ ç¼ºå¤±æ¥å£

### 3.5 ä¸ªäººä¸­å¿ƒ (Profile.vue)

| åŠŸèƒ½ | APIè°ƒç”¨ | æ•°æ®æ˜¾ç¤º | çŠ¶æ€ | è¯´æ˜ |
|------|----------|----------|------|------|
| ç”¨æˆ·ä¿¡æ¯ | âŒ æ— æ¥å£ | âŒ æ— æ³•æµ‹è¯• | ğŸ”´ FAIL | éœ€è¦æ–°å¢GETæ¥å£ |
| æˆ‘çš„ä¹¦ç± | âŒ æ— æ¥å£ | âŒ æ— æ³•æµ‹è¯• | ğŸ”´ FAIL | éœ€è¦æ–°å¢GETæ¥å£ |
| æˆ‘çš„è®¢å• | âŒ æ— æ¥å£ | âŒ æ— æ³•æµ‹è¯• | ğŸ”´ FAIL | éœ€è¦æ–°å¢GETæ¥å£ |
| æˆ‘çš„æ”¶è— | âŒ æ— æ¥å£ | âŒ æ— æ³•æµ‹è¯• | ğŸ”´ FAIL | éœ€è¦æ–°å¢GETæ¥å£ |

**çŠ¶æ€**: ğŸ”´ ç¼ºå¤±æ¥å£

---

## å››ã€è®¤è¯æµç¨‹æµ‹è¯•

| æµ‹è¯•é¡¹ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ | è¯´æ˜ |
|--------|----------|----------|------|------|
| ç™»å½•æˆåŠŸ | è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯ | è¿”å›dataä¸ºnull | ğŸ”´ FAIL | ç™»å½•æ¥å£æœ‰é—®é¢˜ |
| Tokenå­˜å‚¨ | å­˜å‚¨åˆ°localStorage | âš ï¸ æœªæµ‹è¯• | âš ï¸ TODO | éœ€è¦å‰ç«¯å®ç° |
| Tokenå‘é€ | è¯·æ±‚å¤´æºå¸¦token | âš ï¸ æœªæµ‹è¯• | âš ï¸ TODO | éœ€è¦å‰ç«¯å®ç° |
| é€€å‡ºç™»å½• | æ¸…é™¤token | âš ï¸ æœªæµ‹è¯• | âš ï¸ TODO | éœ€è¦å‰ç«¯å®ç° |

**çŠ¶æ€**: ğŸ”´ ç™»å½•æ¥å£éœ€è¦ä¿®å¤

---

## äº”ã€å‘ç°çš„é—®é¢˜

### 5.1 ä¸¥é‡é—®é¢˜ (P0)

| é—®é¢˜ | å½±å“ | ä½ç½® | å»ºè®® |
|------|------|------|------|
| ç™»å½•æ¥å£è¿”å›dataä¸ºnull | å‰ç«¯æ— æ³•è·å–token | `/auth/login` | åç«¯éœ€è¦è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯ |
| ç¼ºå°‘ç”¨æˆ·ç®¡ç†æ¥å£ | ä¸ªäººä¸­å¿ƒæ— æ³•ä½¿ç”¨ | `/users/*` | éœ€è¦æ–°å¢ç”¨æˆ·ç›¸å…³æ¥å£ |
| ç¼ºå°‘ä¹¦ç±å‘å¸ƒæ¥å£ | å‘å¸ƒåŠŸèƒ½æ— æ³•ä½¿ç”¨ | `POST /books` | éœ€è¦æ–°å¢å‘å¸ƒæ¥å£ |

### 5.2 ä¸­ç­‰é—®é¢˜ (P1)

| é—®é¢˜ | å½±å“ | ä½ç½® | å»ºè®® |
|------|------|------|------|
| æ—¥æœŸæ ¼å¼éœ€è¦è½¬æ¢ | æ˜¾ç¤ºä¸å‹å¥½ | `createdAt` | å‰ç«¯æ·»åŠ æ ¼å¼åŒ–å‡½æ•° |
| ç¼ºå°‘è®¢å•ç®¡ç†æ¥å£ | è®¢å•åŠŸèƒ½æ— æ³•ä½¿ç”¨ | `/orders/*` | éœ€è¦æ–°å¢è®¢å•æ¥å£ |
| ç¼ºå°‘æ”¶è—ç®¡ç†æ¥å£ | æ”¶è—åŠŸèƒ½æ— æ³•ä½¿ç”¨ | `/favorites/*` | éœ€è¦æ–°å¢æ”¶è—æ¥å£ |

### 5.3 è½»å¾®é—®é¢˜ (P2)

| é—®é¢˜ | å½±å“ | ä½ç½® | å»ºè®® |
|------|------|------|------|
| sellerRatingä¸º0.0 | æ˜¾ç¤ºä¸çœŸå® | `/books/hot` | æ£€æŸ¥æ•°æ®æˆ–è®¾ç½®é»˜è®¤å€¼ |
| ç›¸ä¼¼æ¨èè¿”å›ç©º | ç”¨æˆ·ä½“éªŒä¸€èˆ¬ | `/books/{id}/related` | å¯ä»¥æ·»åŠ é»˜è®¤æ¨è |

---

## å…­ã€éœ€è¦æ–°å¢çš„åç«¯æ¥å£

### 6.1 ç”¨æˆ·ç®¡ç†

```java
// è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
GET /users/profile
Authorization: Bearer {token}

// æ›´æ–°ç”¨æˆ·ä¿¡æ¯
PUT /users/profile
Authorization: Bearer {token}
Request Body: { username, avatar, school, major, phone, wechat }

// è·å–æˆ‘çš„ä¹¦ç±
GET /users/books
Authorization: Bearer {token}
Query: page, pageSize, status
```

### 6.2 è®¢å•ç®¡ç†

```java
// åˆ›å»ºè®¢å•
POST /orders
Authorization: Bearer {token}
Request Body: { bookId, quantity }

// è·å–æˆ‘çš„è®¢å•
GET /users/orders
Authorization: Bearer {token}
Query: page, pageSize, status

// ç¡®è®¤æ”¶è´§
PUT /orders/{id}/confirm
Authorization: Bearer {token}

// å–æ¶ˆè®¢å•
PUT /orders/{id}/cancel
Authorization: Bearer {token}
```

### 6.3 æ”¶è—ç®¡ç†

```java
// è·å–æˆ‘çš„æ”¶è—
GET /users/favorites
Authorization: Bearer {token}
Query: page, pageSize

// æ·»åŠ æ”¶è—
POST /users/favorites
Authorization: Bearer {token}
Request Body: { bookId }

// å–æ¶ˆæ”¶è—
DELETE /users/favorites/{bookId}
Authorization: Bearer {token}
```

### 6.4 ä¹¦ç±å‘å¸ƒ

```java
// å‘å¸ƒä¹¦ç±
POST /books
Authorization: Bearer {token}
Content-Type: multipart/form-data
Request Body: {
  title, author, publisher, isbn,
  categoryId, condition, price, originalPrice,
  description, cover, images
}

// ä¸Šä¼ å›¾ç‰‡
POST /upload/image
Content-Type: multipart/form-data
Request Body: file
```

---

## ä¸ƒã€å‰ç«¯éœ€è¦å®ç°çš„åŠŸèƒ½

### 7.1 APIè¯·æ±‚å°è£…

åˆ›å»º `src/api/request.js`:
```javascript
import axios from 'axios'

const request = axios.create({
  baseURL: 'http://localhost:8080/api',
  timeout: 10000
})

request.interceptors.request.use(config => {
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

request.interceptors.response.use(
  response => response.data,
  error => {
    if (error.response?.status === 401) {
      localStorage.removeItem('token')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)

export default request
```

### 7.2 æ•°æ®æ ¼å¼åŒ–å‡½æ•°

åˆ›å»º `src/utils/format.js`:
```javascript
export function formatRelativeTime(dateStr) {
  const date = new Date(dateStr)
  const now = new Date()
  const diff = now - date

  const minute = 60 * 1000
  const hour = 60 * minute
  const day = 24 * hour

  if (diff < minute) return 'åˆšåˆš'
  if (diff < hour) return `${Math.floor(diff / minute)}åˆ†é’Ÿå‰`
  if (diff < day) return `${Math.floor(diff / hour)}å°æ—¶å‰`
  if (diff < 7 * day) return `${Math.floor(diff / day)}å¤©å‰`
  return date.toLocaleDateString()
}

export function formatPrice(price) {
  return `Â¥${Number(price).toFixed(2)}`
}
```

### 7.3 çŠ¶æ€ç®¡ç†

ä½¿ç”¨Piniaç®¡ç†ç”¨æˆ·çŠ¶æ€ï¼Œåˆ›å»º `src/stores/user.js`

---

## å…«ã€æµ‹è¯•æ€»ç»“

### 8.1 æµ‹è¯•é€šè¿‡é¡¹

âœ… åˆ†ç±»æ¥å£ - æ­£å¸¸å·¥ä½œ
âœ… çƒ­é—¨ä¹¦ç±æ¥å£ - æ­£å¸¸å·¥ä½œ
âœ… ä¹¦ç±åˆ—è¡¨æ¥å£ - æ­£å¸¸å·¥ä½œ
âœ… ä¹¦ç±è¯¦æƒ…æ¥å£ - æ­£å¸¸å·¥ä½œ
âœ… è¯„ä»·åˆ—è¡¨æ¥å£ - æ­£å¸¸å·¥ä½œ
âœ… è¯„ä»·ç»Ÿè®¡æ¥å£ - æ­£å¸¸å·¥ä½œ
âœ… ç›¸ä¼¼æ¨èæ¥å£ - æ­£å¸¸å·¥ä½œ
âœ… æ•°æ®æ ¼å¼åŸºæœ¬åŒ¹é…

### 8.2 æµ‹è¯•å¤±è´¥é¡¹

ğŸ”´ ç™»å½•æ¥å£ - è¿”å›dataä¸ºnullï¼Œæ— æ³•è·å–token
ğŸ”´ å‘å¸ƒä¹¦ç±æ¥å£ - ä¸å­˜åœ¨
ğŸ”´ ç”¨æˆ·ç®¡ç†æ¥å£ - ä¸å­˜åœ¨
ğŸ”´ è®¢å•ç®¡ç†æ¥å£ - ä¸å­˜åœ¨
ğŸ”´ æ”¶è—ç®¡ç†æ¥å£ - ä¸å­˜åœ¨

### 8.3 å¾…æµ‹è¯•é¡¹

âš ï¸ æœç´¢åŠŸèƒ½ - éœ€è¦æµ‹è¯•
âš ï¸ ç­›é€‰åŠŸèƒ½ - éœ€è¦æµ‹è¯•
âš ï¸ æ’åºåŠŸèƒ½ - éœ€è¦æµ‹è¯•
âš ï¸ Tokenç®¡ç† - éœ€è¦å‰ç«¯å®ç°åæµ‹è¯•
âš ï¸ å›¾ç‰‡ä¸Šä¼  - éœ€è¦æ–°å¢æ¥å£åæµ‹è¯•

---

## ä¹ã€å»ºè®®

### 9.1 åç«¯æ”¹è¿›

1. **ä¿®å¤ç™»å½•æ¥å£**
   - ç¡®ä¿è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯
   - æ£€æŸ¥JWTç”Ÿæˆé€»è¾‘

2. **è¡¥å……ç¼ºå¤±æ¥å£**
   - ä¼˜å…ˆå®ç°ç”¨æˆ·ç®¡ç†æ¥å£
   - å®ç°ä¹¦ç±å‘å¸ƒæ¥å£
   - å®ç°è®¢å•å’Œæ”¶è—æ¥å£

3. **æ•°æ®å®Œæ•´æ€§**
   - æ£€æŸ¥sellerRatingæ•°æ®
   - è¡¥å……ä¹¦ç±çš„sellerä¿¡æ¯

### 9.2 å‰ç«¯æ”¹è¿›

1. **å®ç°APIå°è£…**
   - åˆ›å»ºç»Ÿä¸€çš„è¯·æ±‚å°è£…
   - å®ç°tokenç®¡ç†
   - æ·»åŠ é”™è¯¯å¤„ç†

2. **å®ç°æ•°æ®æ ¼å¼åŒ–**
   - æ·»åŠ æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°
   - æ·»åŠ ä»·æ ¼æ ¼å¼åŒ–å‡½æ•°

3. **å®ç°çŠ¶æ€ç®¡ç†**
   - ä½¿ç”¨Piniaç®¡ç†ç”¨æˆ·çŠ¶æ€
   - å®ç°ç™»å½•/ç™»å‡ºé€»è¾‘

4. **å®Œå–„é¡µé¢åŠŸèƒ½**
   - Books.vueå®ç°æœç´¢ã€ç­›é€‰ã€æ’åº
   - Publish.vueå¯¹æ¥å‘å¸ƒæ¥å£
   - Profile.vueå¯¹æ¥ç”¨æˆ·æ¥å£

### 9.3 é…ç½®ä¼˜åŒ–

1. **å‰ç«¯ä»£ç†é…ç½®**
   åœ¨ `vite.config.js` ä¸­é…ç½®ä»£ç†:
   ```javascript
   export default defineConfig({
     server: {
       proxy: {
         '/api': {
           target: 'http://localhost:8080',
           changeOrigin: true
         }
       }
     }
   })
   ```

2. **ç¯å¢ƒå˜é‡**
   åˆ›å»º `.env` æ–‡ä»¶:
   ```
   VITE_API_BASE_URL=http://localhost:8080/api
   ```

---

## åã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

1. âœ… åç«¯ä¿®å¤ç™»å½•æ¥å£
2. âœ… å‰ç«¯å®ç°APIå°è£…
3. âœ… å‰ç«¯å®ç°æ•°æ®æ ¼å¼åŒ–
4. âœ… å‰ç«¯å®Œå–„Books.vueçš„æœç´¢ã€ç­›é€‰ã€æ’åº

### ç¬¬äºŒé˜¶æ®µï¼ˆç”¨æˆ·åŠŸèƒ½ï¼‰

1. âš ï¸ åç«¯å®ç°ç”¨æˆ·ç®¡ç†æ¥å£
2. âš ï¸ åç«¯å®ç°ä¹¦ç±å‘å¸ƒæ¥å£
3. âš ï¸ å‰ç«¯å®ç°Publish.vueå¯¹æ¥
4. âš ï¸ å‰ç«¯å®ç°Profile.vueå¯¹æ¥

### ç¬¬ä¸‰é˜¶æ®µï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰

1. âš ï¸ åç«¯å®ç°è®¢å•ç®¡ç†æ¥å£
2. âš ï¸ åç«¯å®ç°æ”¶è—ç®¡ç†æ¥å£
3. âš ï¸ å‰ç«¯å®ç°è®¢å•åŠŸèƒ½
4. âš ï¸ å‰ç«¯å®ç°æ”¶è—åŠŸèƒ½

---

## é™„å½•

### A. æµ‹è¯•å‘½ä»¤

```bash
# æµ‹è¯•åˆ†ç±»æ¥å£
curl http://localhost:8080/api/books/categories

# æµ‹è¯•çƒ­é—¨ä¹¦ç±
curl http://localhost:8080/api/books/hot?limit=4

# æµ‹è¯•ä¹¦ç±åˆ—è¡¨
curl "http://localhost:8080/api/books?page=1&pageSize=12"

# æµ‹è¯•ä¹¦ç±è¯¦æƒ…
curl http://localhost:8080/api/books/1

# æµ‹è¯•è¯„ä»·åˆ—è¡¨
curl http://localhost:8080/api/books/1/reviews

# æµ‹è¯•è¯„ä»·ç»Ÿè®¡
curl http://localhost:8080/api/books/1/reviews/statistics

# æµ‹è¯•ç›¸ä¼¼æ¨è
curl http://localhost:8080/api/books/1/related?limit=4

# æµ‹è¯•ç™»å½•
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456"}'
```

### B. ç›¸å…³æ–‡æ¡£

- [å‰åç«¯é€‚é…æ–‡æ¡£](./å‰åç«¯é€‚é…æ–‡æ¡£.md)
- [æ•°æ®åº“è¡¨ç»“æ„](./tables.sql)
- [åç«¯APIæ–‡æ¡£](../backend-code/src/main/java/com/bookmarket/controller/)
